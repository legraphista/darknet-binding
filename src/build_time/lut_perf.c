#include <time.h>
#include <stdlib.h>
#include <stdio.h>

float byte_float_LUT[] = {0 / 255.f, 1 / 255.f, 2 / 255.f, 3 / 255.f, 4 / 255.f, 5 / 255.f, 6 / 255.f,
                          7 / 255.f, 8 / 255.f, 9 / 255.f, 10 / 255.f, 11 / 255.f, 12 / 255.f, 13 / 255.f,
                          14 / 255.f, 15 / 255.f, 16 / 255.f, 17 / 255.f, 18 / 255.f, 19 / 255.f, 20 / 255.f,
                          21 / 255.f, 22 / 255.f, 23 / 255.f, 24 / 255.f, 25 / 255.f, 26 / 255.f, 27 / 255.f,
                          28 / 255.f, 29 / 255.f, 30 / 255.f, 31 / 255.f, 32 / 255.f, 33 / 255.f, 34 / 255.f,
                          35 / 255.f, 36 / 255.f, 37 / 255.f, 38 / 255.f, 39 / 255.f, 40 / 255.f, 41 / 255.f,
                          42 / 255.f, 43 / 255.f, 44 / 255.f, 45 / 255.f, 46 / 255.f, 47 / 255.f, 48 / 255.f,
                          49 / 255.f, 50 / 255.f, 51 / 255.f, 52 / 255.f, 53 / 255.f, 54 / 255.f, 55 / 255.f,
                          56 / 255.f, 57 / 255.f, 58 / 255.f, 59 / 255.f, 60 / 255.f, 61 / 255.f, 62 / 255.f,
                          63 / 255.f, 64 / 255.f, 65 / 255.f, 66 / 255.f, 67 / 255.f, 68 / 255.f, 69 / 255.f,
                          70 / 255.f, 71 / 255.f, 72 / 255.f, 73 / 255.f, 74 / 255.f, 75 / 255.f, 76 / 255.f,
                          77 / 255.f, 78 / 255.f, 79 / 255.f, 80 / 255.f, 81 / 255.f, 82 / 255.f, 83 / 255.f,
                          84 / 255.f, 85 / 255.f, 86 / 255.f, 87 / 255.f, 88 / 255.f, 89 / 255.f, 90 / 255.f,
                          91 / 255.f, 92 / 255.f, 93 / 255.f, 94 / 255.f, 95 / 255.f, 96 / 255.f, 97 / 255.f,
                          98 / 255.f, 99 / 255.f, 100 / 255.f, 101 / 255.f, 102 / 255.f, 103 / 255.f,
                          104 / 255.f, 105 / 255.f, 106 / 255.f, 107 / 255.f, 108 / 255.f, 109 / 255.f,
                          110 / 255.f, 111 / 255.f, 112 / 255.f, 113 / 255.f, 114 / 255.f, 115 / 255.f,
                          116 / 255.f, 117 / 255.f, 118 / 255.f, 119 / 255.f, 120 / 255.f, 121 / 255.f,
                          122 / 255.f, 123 / 255.f, 124 / 255.f, 125 / 255.f, 126 / 255.f, 127 / 255.f,
                          128 / 255.f, 129 / 255.f, 130 / 255.f, 131 / 255.f, 132 / 255.f, 133 / 255.f,
                          134 / 255.f, 135 / 255.f, 136 / 255.f, 137 / 255.f, 138 / 255.f, 139 / 255.f,
                          140 / 255.f, 141 / 255.f, 142 / 255.f, 143 / 255.f, 144 / 255.f, 145 / 255.f,
                          146 / 255.f, 147 / 255.f, 148 / 255.f, 149 / 255.f, 150 / 255.f, 151 / 255.f,
                          152 / 255.f, 153 / 255.f, 154 / 255.f, 155 / 255.f, 156 / 255.f, 157 / 255.f,
                          158 / 255.f, 159 / 255.f, 160 / 255.f, 161 / 255.f, 162 / 255.f, 163 / 255.f,
                          164 / 255.f, 165 / 255.f, 166 / 255.f, 167 / 255.f, 168 / 255.f, 169 / 255.f,
                          170 / 255.f, 171 / 255.f, 172 / 255.f, 173 / 255.f, 174 / 255.f, 175 / 255.f,
                          176 / 255.f, 177 / 255.f, 178 / 255.f, 179 / 255.f, 180 / 255.f, 181 / 255.f,
                          182 / 255.f, 183 / 255.f, 184 / 255.f, 185 / 255.f, 186 / 255.f, 187 / 255.f,
                          188 / 255.f, 189 / 255.f, 190 / 255.f, 191 / 255.f, 192 / 255.f, 193 / 255.f,
                          194 / 255.f, 195 / 255.f, 196 / 255.f, 197 / 255.f, 198 / 255.f, 199 / 255.f,
                          200 / 255.f, 201 / 255.f, 202 / 255.f, 203 / 255.f, 204 / 255.f, 205 / 255.f,
                          206 / 255.f, 207 / 255.f, 208 / 255.f, 209 / 255.f, 210 / 255.f, 211 / 255.f,
                          212 / 255.f, 213 / 255.f, 214 / 255.f, 215 / 255.f, 216 / 255.f, 217 / 255.f,
                          218 / 255.f, 219 / 255.f, 220 / 255.f, 221 / 255.f, 222 / 255.f, 223 / 255.f,
                          224 / 255.f, 225 / 255.f, 226 / 255.f, 227 / 255.f, 228 / 255.f, 229 / 255.f,
                          230 / 255.f, 231 / 255.f, 232 / 255.f, 233 / 255.f, 234 / 255.f, 235 / 255.f,
                          236 / 255.f, 237 / 255.f, 238 / 255.f, 239 / 255.f, 240 / 255.f, 241 / 255.f,
                          242 / 255.f, 243 / 255.f, 244 / 255.f, 245 / 255.f, 246 / 255.f, 247 / 255.f,
                          248 / 255.f, 249 / 255.f, 250 / 255.f, 251 / 255.f, 252 / 255.f, 253 / 255.f,
                          254 / 255.f, 255 / 255.f};

int frame_size = 3840 * 2160 * 3;
float magic_number = 1/255.f;

int main() {
  unsigned char *pseudo_frame = (unsigned char *) malloc(frame_size);
  clock_t begin, end;
  double time_spent;

  for (int i = 0; i < frame_size; i++) {
    pseudo_frame[i] = i % 256;
  }

  float *proc_frame = (float *) malloc(frame_size * sizeof(float));
  float *LUT_frame = (float *) malloc(frame_size * sizeof(float));

  begin = clock();
  for (int i = 0; i < frame_size; i++) {
    proc_frame[i] = pseudo_frame[i] * magic_number;
  }
  end = clock();
  time_spent = (double)(end - begin) / CLOCKS_PER_SEC * 1000;

  printf("PROC %f %f\n", time_spent,proc_frame[frame_size-1]);

  begin = clock();
  for (int i = 0; i < frame_size; i++) {
    LUT_frame[i] = byte_float_LUT[pseudo_frame[i]];
  }
  end = clock();
  time_spent = (double)(end - begin) / CLOCKS_PER_SEC * 1000;

  printf("LUT %f %f\n", time_spent, LUT_frame[frame_size-1]);
}